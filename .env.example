# ===========================================
# CONFIGURAÇÃO DO AMBIENTE
# ===========================================

# Ambiente de execução (development, production)
NODE_ENV=development

# ===========================================
# BANCO DE DADOS
# ===========================================

# URL de conexão do PostgreSQL
# Formato: postgresql://usuario:senha@host:porta/database
DATABASE_URL=postgresql://user:password@localhost:5432/dental_clinic

# ===========================================
# REDIS (SESSÕES E CACHE)
# ===========================================

# Host do Redis (obrigatório para produção)
REDIS_HOST=localhost

# Porta do Redis
REDIS_PORT=6379

# Senha do Redis (se configurada)
# REDIS_PASSWORD=sua-senha-redis

# Modo cluster do Redis (opcional)
# REDIS_CLUSTER_NODES=host1:port1,host2:port2,host3:port3

# ===========================================
# SESSÕES E SEGURANÇA
# ===========================================

# Secret para assinar cookies de sessão
# CRÍTICO: Gerar um secret aleatório e forte para produção!
# Comando para gerar: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=change-this-to-a-random-secret-in-production

# Duração da sessão em milissegundos (padrão: 24 horas)
# SESSION_MAX_AGE=86400000

# ===========================================
# AUTENTICAÇÃO GOOGLE OAuth
# ===========================================

# Credenciais do Google OAuth (opcional)
# Obter em: https://console.cloud.google.com/apis/credentials
# GOOGLE_CLIENT_ID=seu-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=seu-google-client-secret

# URL de callback do Google OAuth
# GOOGLE_CALLBACK_URL=http://localhost:5000/api/auth/google/callback

# ===========================================
# EMAIL / SMTP
# ===========================================

# Configurações de email (opcional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=seu-email@gmail.com
# SMTP_PASS=sua-senha-app
# EMAIL_FROM=Sistema Dental <noreply@dentalclinic.com>

# ===========================================
# APIS EXTERNAS
# ===========================================

# Chave da API de pagamentos (se usar Stripe, PagSeguro, etc)
# PAYMENT_API_KEY=sk_test_...

# Webhook secret para verificação de pagamentos
# PAYMENT_WEBHOOK_SECRET=whsec_...

# ===========================================
# ARMAZENAMENTO DE ARQUIVOS
# ===========================================

# Diretório local para uploads (padrão: ./uploads)
# UPLOAD_DIR=./uploads

# AWS S3 (opcional, para armazenamento em nuvem)
# AWS_ACCESS_KEY_ID=sua-access-key
# AWS_SECRET_ACCESS_KEY=sua-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=dental-clinic-files

# ===========================================
# LOGS E MONITORAMENTO
# ===========================================

# Nível de log (debug, info, warn, error)
LOG_LEVEL=info

# Sentry DSN para tracking de erros (opcional)
# SENTRY_DSN=https://...@sentry.io/...

# ===========================================
# RATE LIMITING
# ===========================================

# Janela de rate limiting em minutos (padrão: 15)
# RATE_LIMIT_WINDOW_MS=900000

# Máximo de requisições por janela por IP (padrão: 500)
# RATE_LIMIT_MAX=500

# ===========================================
# CACHE
# ===========================================

# Tamanho máximo do cache em memória (número de itens)
# CACHE_MAX_ITEMS=10000

# TTL padrão do cache em segundos (padrão: 300)
# CACHE_DEFAULT_TTL=300

# ===========================================
# SERVIDOR
# ===========================================

# Porta do servidor (padrão: 5000)
PORT=5000

# Host do servidor (padrão: 0.0.0.0)
# HOST=0.0.0.0

# Número máximo de workers (padrão: CPUs disponíveis, max 16)
# MAX_WORKERS=16

# ===========================================
# N8N - AUTOMAÇÕES
# ===========================================

# URL base dos webhooks do n8n (obrigatório para automações)
# N8N_WEBHOOK_BASE_URL=https://n8n.seusiteaqui.com
N8N_WEBHOOK_BASE_URL=http://localhost:5678

# Secret para validar webhooks do n8n (gerar aleatório)
# Comando para gerar: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
N8N_WEBHOOK_SECRET=change-this-to-a-random-secret

# API Key do n8n (para criar workflows programaticamente)
# N8N_API_KEY=n8n_api_xxxxx

# ===========================================
# WUZAPI - WHATSAPP BUSINESS API OFICIAL
# ===========================================

# API Key do Wuzapi
# Obter em: https://wuzapi.cloud/
# WUZAPI_API_KEY=sua-api-key-wuzapi

# Instance ID do Wuzapi (identificador da sua instância WhatsApp)
# WUZAPI_INSTANCE_ID=sua-instance-id

# URL base da API Wuzapi (padrão)
WUZAPI_BASE_URL=https://wuzapi.cloud/api/v2

# Webhook secret para validar respostas do Wuzapi
# WUZAPI_WEBHOOK_SECRET=seu-webhook-secret

# ===========================================
# GOOGLE CALENDAR
# ===========================================

# Credenciais para integração Google Calendar
# Obter em: https://console.cloud.google.com/apis/credentials
# 1. Criar projeto ou selecionar existente
# 2. Ativar Google Calendar API
# 3. Criar credenciais OAuth 2.0
# 4. Adicionar redirect URI autorizada (ver abaixo)
# 5. Copiar Client ID e Client Secret

GOOGLE_CLIENT_ID=seu-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-seu-client-secret
GOOGLE_REDIRECT_URI=http://localhost:5000/api/v1/google/callback

# Para produção, use HTTPS:
# GOOGLE_REDIRECT_URI=https://seusite.com/api/v1/google/callback

# ===========================================
# IMPORTAÇÃO DE PACIENTES (OCR + AI)
# ===========================================

# DeepSeek API Key (RECOMENDADO - 95% mais barato que OpenAI!)
# Obter em: https://platform.deepseek.com/
# Custo: ~R$ 0,30 por 1.000 fichas processadas
# Deixe vazio para usar OpenAI como fallback
DEEPSEEK_API_KEY=sk-...

# OpenAI API Key (FALLBACK - usado apenas se DEEPSEEK_API_KEY estiver vazio)
# Obter em: https://platform.openai.com/api-keys
# Custo: ~R$ 1,50 por 1.000 fichas (5x mais caro que DeepSeek)
# OPENAI_API_KEY=sk-...

# Google Cloud Vision API (para OCR de fichas físicas)
# Caminho para o arquivo JSON de credenciais do Service Account
# Obter em: https://console.cloud.google.com/apis/credentials
# 1. Criar Service Account com role "Cloud Vision API User"
# 2. Baixar arquivo JSON das credenciais
# 3. Colocar o caminho completo abaixo
# IMPORTANTE: Path relativo ou absoluto
GOOGLE_APPLICATION_CREDENTIALS=./config/google-vision-credentials.json

# Preço de cobrança da digitalização (R$ 30,00 por 1.000 fichas)
# Esse é o preço que você cobra dos clientes (custo da API + margem)
# DIGITALIZATION_PRICE_PER_THOUSAND=3000

# ===========================================
# RECURSOS OPCIONAIS
# ===========================================

# SMS Gateway (opcional - fallback do WhatsApp)
# SMS_API_KEY=...
# SMS_FROM=DentalClinic

# Backup automático (opcional)
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE=0 2 * * *  # Cron: todo dia às 2h
# BACKUP_RETENTION_DAYS=30

# ===========================================
# DESENVOLVIMENTO
# ===========================================

# Habilitar debug do Drizzle ORM
# DEBUG=drizzle:*

# Habilitar hot reload (desenvolvimento)
# HOT_RELOAD=true

# ===========================================
# NOTAS IMPORTANTES
# ===========================================

# 1. NUNCA commite o arquivo .env no Git!
# 2. Use .env.example como template
# 3. Em produção, SEMPRE configure SESSION_SECRET único
# 4. Para produção, configure Redis obrigatoriamente
# 5. Use HTTPS em produção (configure reverse proxy nginx/traefik)
# 6. Habilite SSL no banco de dados em produção
# 7. Configure backups regulares do banco de dados
# 8. Monitore os health checks: /health, /health/ready, /health/live
